{% extends "base.html.j2" %}


{% block body %}
<!-- Auto-refresh page every 5 seconds for live updates, credit to Evan M -->
<meta http-equiv="refresh" content="5">

<p><a href="/create" target="_blank">Create New Post (Opens in new window)</a></p>
<hr>
<h2>Active Posts</h2>
<!-- If there are posts, display them -->
{% if posts %} <!-- Evan M reminded me about this, not sure how required that credit is but oh well-->
    {% for post in posts %}
        <div style="border: 1px solid black; margin: 10px; padding: 10px;">
            <p><strong>Posted:</strong> {{ post.created_at }}</p>
            <p><strong>Message:</strong> {{ post.message }}</p>
            <p><strong>Lives Remaining:</strong> {{ post.lives }}</p>
            
            <form method="POST" action="/addlife/{{ post.post_id }}" style="display: inline;">
                <button type="submit">Add Life (+1)</button>
            </form>
        </div>
    {% endfor %}
{% else %}
    <p>No active posts. All posts have expired or none have been created yet.</p>
{% endif %}
<hr>
<p><em>Page auto-refreshes every 5 seconds</em></p>
{% endblock %}
